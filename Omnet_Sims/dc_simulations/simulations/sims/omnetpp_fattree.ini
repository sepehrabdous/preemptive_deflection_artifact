[Config DCTCP_ECMP_fattree]
network = FatTree

**.ipv4.ip.timeToLive = ${ttl = 250}
**.tcp.close_instead_of_timewait = ${closeInsteadOfWait = true}
**.tcp.FRs_disabled = ${FRsDisabled = false}
**.useECMP = ${usingECMP = true}
**.use_power_of_n_lb = ${usingPowerOfNLB = false}
**.edge[*].random_power_factor = ${edgeRandomPowerFactor = 2}
**.agg[*].random_power_factor = ${aggRandomPowerFactor = $edgeRandomPowerFactor}
**.core[*].random_power_factor = ${coreRandomPowerFactor = $edgeRandomPowerFactor}
**.tcp.tcpAlgorithmClass = "DCTcp"
**.tcp.ecnWillingness = ${ecnWill = true}

sim-time-limit = ${simTimeLimit = 1.2}s

**.ipv4.ip.should_use_v2_marking = ${shouldUseV2Marking = false}
**.ipv4.ip.marking_type = ${markingType = "SRPT"}
**.ipv4.ip.delta = ${markingTimer = 0.00036}s
**.ipv4.ip.has_ordering_layer = ${hasOrderingLayer = false}
**.ipv4.ip.omega = ${orderingTimer = 0.00036}s

FatTree.k = ${K = 8}
**.num_bursty_apps = ${numBurstyApps = 1}
**.server[*].app[1..].num_requests_per_burst = ${numReqPerBurst = 100}
**.num_mice_background_flow_apps_in_each_server = ${numMiceBackgroundFlowAppsInEachServer = 1}
**.num_elephant_background_flow_apps_in_each_server = ${numElephantBackgroundFlowAppsInEachServer = 0}

**.server[*].app[1..].startTime = 0s
**.server[*].app[1..].replyLength = ${incastFlowSize = 40000}B
**.server[*].app[1..].requestLength = 250B
**.server[*].app[1..].application_category = ${serverApplicationCategory = index() < 1 + $numMiceBackgroundFlowAppsInEachServer ? "cache" : "web"}
**.server[*].app[1..].background_inter_arrival_time_multiplier = ${bgInterArrivalMultiplier = 0.097500}
**.server[*].app[1..].background_flow_size_multiplier = ${bgFlowSizeMultiplier = 1}
**.server[*].app[1..].bursty_inter_arrival_time_multiplier = ${burstyInterArrivalMultiplier = 0.122000, 0.040600, 0.024400, 0.017400, 0.013500}
**.server[*].app[1..].bursty_flow_size_multiplier = ${burstyFlowSizeMultiplier = 1}
**.server[*].app[1..].numRequestsToSend = 1
**.server[*].app[1..].distibutions_base_root = "./"

**.edge[*].eth[*].mac.queue.typename = ${edgeQueueType = "V2PIFO"}
**.edge[*].eth[*].mac.queue.dataCapacity = ${edgeQueueSizePacketBytes = 300000}B
**.edge[*].use_v2_pifo = ${edgeUseV2Pifo = true}
**.edge[*].eth[*].mac.queue.dropper_type = ${edgeDropperType = "FIFO"}
**.edge[*].eth[*].mac.queue.scheduler_type = ${edgeSchedulerType = "FIFO"}
**.edge[*].eth[*].mac.queue.dctcp_thresh = ${edgeQueueSizeDCTCPThresh = 65}

**.agg[*].eth[*].mac.queue.typename = ${aggQueueType = $edgeQueueType}
**.agg[*].eth[*].mac.queue.dataCapacity = ${aggQueueSizePacketBytes = $edgeQueueSizePacketBytes}B
**.agg[*].use_v2_pifo = ${aggUseV2Pifo = $edgeUseV2Pifo}
**.agg[*].eth[*].mac.queue.dropper_type = ${aggDropperType = $edgeDropperType}
**.agg[*].eth[*].mac.queue.scheduler_type = ${aggSchedulerType = $edgeSchedulerType}
**.agg[*].eth[*].mac.queue.dctcp_thresh = ${aggQueueSizeDCTCPThresh = $edgeQueueSizeDCTCPThresh}

**.core[*].eth[*].mac.queue.typename = ${coreQueueType = $edgeQueueType}
**.core[*].eth[*].mac.queue.dataCapacity = ${coreQueueSizePacketBytes = $edgeQueueSizePacketBytes}B
**.core[*].use_v2_pifo = ${coreUseV2Pifo = $edgeUseV2Pifo}
**.core[*].eth[*].mac.queue.dropper_type = ${coreDropperType = $edgeDropperType}
**.core[*].eth[*].mac.queue.scheduler_type = ${coreSchedulerType = $edgeSchedulerType}
**.core[*].eth[*].mac.queue.dctcp_thresh = ${coreQueueSizeDCTCPThresh = $edgeQueueSizeDCTCPThresh}

**.edge[*].eth[*].mac.typename = ${edgeMacTypeName = "AugmentedEtherMac"}
**.agg[*].eth[*].mac.typename = ${aggMacTypeName = $edgeMacTypeName}
**.core[*].eth[*].mac.typename = ${coreMacTypeName = $edgeMacTypeName}
**.edge[*].relayUnit.typename = ${edgeRelayTypeName = "BouncingIeee8021dRelay"}
**.agg[*].relayUnit.typename = ${aggRelayTypeName = $edgeRelayTypeName}
**.core[*].relayUnit.typename = ${coreRelayTypeName = $edgeRelayTypeName}

**.edge[*].bounce_randomly = ${edgeBounceRandomly = false}
**.agg[*].bounce_randomly = ${aggBounceRandomly = $edgeBounceRandomly}
**.core[*].bounce_randomly = ${coreBounceRandomly = $edgeBounceRandomly}

**.edge[*].bounce_randomly_v2 = ${edgeBounceRandomlyPowerOfN = false}
**.agg[*].bounce_randomly_v2 = ${aggBounceRandomlyPowerOfN = $edgeBounceRandomlyPowerOfN}
**.core[*].bounce_randomly_v2 = ${coreBounceRandomlyPowerOfN = $edgeBounceRandomlyPowerOfN}
**.edge[*].random_power_bounce_factor = ${edgeBounceRandomlyPowerFactor = 2}
**.agg[*].random_power_bounce_factor = ${aggBounceRandomlyPowerFactor = $edgeBounceRandomlyPowerFactor}
**.core[*].random_power_bounce_factor = ${coreBounceRandomlyPowerFactor = $edgeBounceRandomlyPowerFactor}

**.edge[*].denominator_for_retrasnmissions = ${edgeDenomRet = 2}
**.agg[*].denominator_for_retrasnmissions = ${aggDenomRet = $edgeDenomRet}
**.core[*].denominator_for_retrasnmissions = ${coreDenomRet = $edgeDenomRet}

**.arp.typename = "GlobalArp"
**.edge[*].learn_mac_addresses = false
**.agg[*].learn_mac_addresses = false
**.core[*].learn_mac_addresses = false
**.edge[*].macTable.addressTableFile ="./MAC_Table_Data/fat_tree_edge[" + string(parentIndex()) + "].txt"
**.agg[*].macTable.addressTableFile ="./MAC_Table_Data/fat_tree_agg[" + string(parentIndex()) + "].txt"
**.core[*].macTable.addressTableFile ="./MAC_Table_Data/fat_tree_core[" + string(parentIndex()) + "].txt"

cmdenv-output-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.out
output-scalar-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.sca
output-vector-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.vec
eventlog-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.elog
snapshot-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.sna

**.server[*].numApps = ${server0NumApps = 1 + $numMiceBackgroundFlowAppsInEachServer + $numBurstyApps}
# (index() < 1 + $numMiceBackgroundFlowAppsInEachServer) ? Mice flow : Bursty
**.server[*].app[1..].is_bursty = ${server0IsBursty = index() < 1 + $numMiceBackgroundFlowAppsInEachServer ? false : true}
**.server[*].app[0].typename = "DCTcpGenericServerApp"
**.server[*].app[0].localPort = 80
**.server[*].app[1..].typename = "MultiSocketBasicClient"
**.server[*].app[1..].is_mice_background = ${serverIsMiceBackground = index() < 1 + $numMiceBackgroundFlowAppsInEachServer ? true : false}



########################################################################
[Config DCTCP_DIBS_fattree]
network = FatTree

**.ipv4.ip.timeToLive = ${ttl = 250}
**.tcp.close_instead_of_timewait = ${closeInsteadOfWait = true}
**.tcp.FRs_disabled = ${FRsDisabled = true}
**.useECMP = ${usingECMP = true}
**.use_power_of_n_lb = ${usingPowerOfNLB = false}
**.edge[*].random_power_factor = ${edgeRandomPowerFactor = 2}
**.agg[*].random_power_factor = ${aggRandomPowerFactor = $edgeRandomPowerFactor}
**.core[*].random_power_factor = ${coreRandomPowerFactor = $edgeRandomPowerFactor}
**.tcp.tcpAlgorithmClass = "DCTcp"
**.tcp.ecnWillingness = ${ecnWill = true}

sim-time-limit = ${simTimeLimit = 1.2}s

**.ipv4.ip.should_use_v2_marking = ${shouldUseV2Marking = false}
**.ipv4.ip.marking_type = ${markingType = "SRPT"}
**.ipv4.ip.delta = ${markingTimer = 0.00036}s
**.ipv4.ip.has_ordering_layer = ${hasOrderingLayer = false}
**.ipv4.ip.omega = ${orderingTimer = 0.00036}s

FatTree.k = ${K = 8}
**.num_bursty_apps = ${numBurstyApps = 1}
**.server[*].app[1..].num_requests_per_burst = ${numReqPerBurst = 100}
**.num_mice_background_flow_apps_in_each_server = ${numMiceBackgroundFlowAppsInEachServer = 1}
**.num_elephant_background_flow_apps_in_each_server = ${numElephantBackgroundFlowAppsInEachServer = 0}

**.server[*].app[1..].startTime = 0s
**.server[*].app[1..].replyLength = ${incastFlowSize = 40000}B
**.server[*].app[1..].requestLength = 250B
**.server[*].app[1..].application_category = ${serverApplicationCategory = index() < 1 + $numMiceBackgroundFlowAppsInEachServer ? "cache" : "web"}
**.server[*].app[1..].background_inter_arrival_time_multiplier = ${bgInterArrivalMultiplier = 0.097500}
**.server[*].app[1..].background_flow_size_multiplier = ${bgFlowSizeMultiplier = 1}
**.server[*].app[1..].bursty_inter_arrival_time_multiplier = ${burstyInterArrivalMultiplier = 0.122000, 0.040600, 0.024400, 0.017400, 0.013500}
**.server[*].app[1..].bursty_flow_size_multiplier = ${burstyFlowSizeMultiplier = 1}
**.server[*].app[1..].numRequestsToSend = 1
**.server[*].app[1..].distibutions_base_root = "./"

**.edge[*].eth[*].mac.queue.typename = ${edgeQueueType = "V2PIFO"}
**.edge[*].eth[*].mac.queue.dataCapacity = ${edgeQueueSizePacketBytes = 300000}B
**.edge[*].use_v2_pifo = ${edgeUseV2Pifo = true}
**.edge[*].eth[*].mac.queue.dropper_type = ${edgeDropperType = "FIFO"}
**.edge[*].eth[*].mac.queue.scheduler_type = ${edgeSchedulerType = "FIFO"}
**.edge[*].eth[*].mac.queue.dctcp_thresh = ${edgeQueueSizeDCTCPThresh = 65}

**.agg[*].eth[*].mac.queue.typename = ${aggQueueType = $edgeQueueType}
**.agg[*].eth[*].mac.queue.dataCapacity = ${aggQueueSizePacketBytes = $edgeQueueSizePacketBytes}B
**.agg[*].use_v2_pifo = ${aggUseV2Pifo = $edgeUseV2Pifo}
**.agg[*].eth[*].mac.queue.dropper_type = ${aggDropperType = $edgeDropperType}
**.agg[*].eth[*].mac.queue.scheduler_type = ${aggSchedulerType = $edgeSchedulerType}
**.agg[*].eth[*].mac.queue.dctcp_thresh = ${aggQueueSizeDCTCPThresh = $edgeQueueSizeDCTCPThresh}

**.core[*].eth[*].mac.queue.typename = ${coreQueueType = $edgeQueueType}
**.core[*].eth[*].mac.queue.dataCapacity = ${coreQueueSizePacketBytes = $edgeQueueSizePacketBytes}B
**.core[*].use_v2_pifo = ${coreUseV2Pifo = $edgeUseV2Pifo}
**.core[*].eth[*].mac.queue.dropper_type = ${coreDropperType = $edgeDropperType}
**.core[*].eth[*].mac.queue.scheduler_type = ${coreSchedulerType = $edgeSchedulerType}
**.core[*].eth[*].mac.queue.dctcp_thresh = ${coreQueueSizeDCTCPThresh = $edgeQueueSizeDCTCPThresh}

**.edge[*].eth[*].mac.typename = ${edgeMacTypeName = "AugmentedEtherMac"}
**.agg[*].eth[*].mac.typename = ${aggMacTypeName = $edgeMacTypeName}
**.core[*].eth[*].mac.typename = ${coreMacTypeName = $edgeMacTypeName}
**.edge[*].relayUnit.typename = ${edgeRelayTypeName = "BouncingIeee8021dRelay"}
**.agg[*].relayUnit.typename = ${aggRelayTypeName = $edgeRelayTypeName}
**.core[*].relayUnit.typename = ${coreRelayTypeName = $edgeRelayTypeName}

**.edge[*].bounce_randomly = ${edgeBounceRandomly = true}
**.edge[*].filter_out_full_ports = ${edgeFilterOutFullPorts = true}
**.edge[*].approximate_random_deflection = ${edgeApproximateRandomDeflection = false}
**.agg[*].bounce_randomly = ${aggBounceRandomly = $edgeBounceRandomly}
**.agg[*].filter_out_full_ports = ${aggFilterOutFullPorts = $edgeFilterOutFullPorts}
**.agg[*].approximate_random_deflection = ${aggApproximateRandomDeflection = $edgeApproximateRandomDeflection}
**.core[*].bounce_randomly = ${coreBounceRandomly = $edgeBounceRandomly}
**.core[*].filter_out_full_ports = ${coreFilterOutFullPorts = $edgeFilterOutFullPorts}
**.core[*].approximate_random_deflection = ${coreApproximateRandomDeflection = $edgeApproximateRandomDeflection}

**.edge[*].bounce_randomly_v2 = ${edgeBounceRandomlyPowerOfN = false}
**.agg[*].bounce_randomly_v2 = ${aggBounceRandomlyPowerOfN = $edgeBounceRandomlyPowerOfN}
**.core[*].bounce_randomly_v2 = ${coreBounceRandomlyPowerOfN = $edgeBounceRandomlyPowerOfN}
**.edge[*].random_power_bounce_factor = ${edgeBounceRandomlyPowerFactor = 2}
**.agg[*].random_power_bounce_factor = ${aggBounceRandomlyPowerFactor = $edgeBounceRandomlyPowerFactor}
**.core[*].random_power_bounce_factor = ${coreBounceRandomlyPowerFactor = $edgeBounceRandomlyPowerFactor}

**.edge[*].denominator_for_retrasnmissions = ${edgeDenomRet = 2}
**.agg[*].denominator_for_retrasnmissions = ${aggDenomRet = $edgeDenomRet}
**.core[*].denominator_for_retrasnmissions = ${coreDenomRet = $edgeDenomRet}

**.arp.typename = "GlobalArp"
**.edge[*].learn_mac_addresses = false
**.agg[*].learn_mac_addresses = false
**.core[*].learn_mac_addresses = false
**.edge[*].macTable.addressTableFile ="./MAC_Table_Data/fat_tree_edge[" + string(parentIndex()) + "].txt"
**.agg[*].macTable.addressTableFile ="./MAC_Table_Data/fat_tree_agg[" + string(parentIndex()) + "].txt"
**.core[*].macTable.addressTableFile ="./MAC_Table_Data/fat_tree_core[" + string(parentIndex()) + "].txt"

cmdenv-output-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.out
output-scalar-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.sca
output-vector-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.vec
eventlog-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.elog
snapshot-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.sna

**.server[*].numApps = ${server0NumApps = 1 + $numMiceBackgroundFlowAppsInEachServer + $numBurstyApps}
# (index() < 1 + $numMiceBackgroundFlowAppsInEachServer) ? Mice flow : Bursty
**.server[*].app[1..].is_bursty = ${server0IsBursty = index() < 1 + $numMiceBackgroundFlowAppsInEachServer ? false : true}
**.server[*].app[0].typename = "DCTcpGenericServerApp"
**.server[*].app[0].localPort = 80
**.server[*].app[1..].typename = "MultiSocketBasicClient"
**.server[*].app[1..].is_mice_background = ${serverIsMiceBackground = index() < 1 + $numMiceBackgroundFlowAppsInEachServer ? true : false}




########################################################################
[Config DCTCP_SD_fattree]
network = FatTree

**.ipv4.ip.timeToLive = ${ttl = 250}
**.tcp.close_instead_of_timewait = ${closeInsteadOfWait = true}
**.tcp.FRs_disabled = ${FRsDisabled = true}
**.useECMP = ${usingECMP = true}
**.use_power_of_n_lb = ${usingPowerOfNLB = false}
**.edge[*].random_power_factor = ${edgeRandomPowerFactor = 2}
**.agg[*].random_power_factor = ${aggRandomPowerFactor = $edgeRandomPowerFactor}
**.core[*].random_power_factor = ${coreRandomPowerFactor = $edgeRandomPowerFactor}
**.tcp.tcpAlgorithmClass = "DCTcp"
**.tcp.ecnWillingness = ${ecnWill = true}

sim-time-limit = ${simTimeLimit = 1.2}s

**.ipv4.ip.should_use_v2_marking = ${shouldUseV2Marking = false}
**.ipv4.ip.marking_type = ${markingType = "SRPT"}
**.ipv4.ip.delta = ${markingTimer = 0.00036}s
**.ipv4.ip.has_ordering_layer = ${hasOrderingLayer = false}
**.ipv4.ip.omega = ${orderingTimer = 0.00036}s

FatTree.k = ${K = 8}
**.num_bursty_apps = ${numBurstyApps = 1}
**.server[*].app[1..].num_requests_per_burst = ${numReqPerBurst = 100}
**.num_mice_background_flow_apps_in_each_server = ${numMiceBackgroundFlowAppsInEachServer = 1}
**.num_elephant_background_flow_apps_in_each_server = ${numElephantBackgroundFlowAppsInEachServer = 0}

**.server[*].app[1..].startTime = 0s
**.server[*].app[1..].replyLength = ${incastFlowSize = 40000}B
**.server[*].app[1..].requestLength = 250B
**.server[*].app[1..].application_category = ${serverApplicationCategory = index() < 1 + $numMiceBackgroundFlowAppsInEachServer ? "cache" : "web"}
**.server[*].app[1..].background_inter_arrival_time_multiplier = ${bgInterArrivalMultiplier = 0.097500}
**.server[*].app[1..].background_flow_size_multiplier = ${bgFlowSizeMultiplier = 1}
**.server[*].app[1..].bursty_inter_arrival_time_multiplier = ${burstyInterArrivalMultiplier = 0.122000, 0.040600, 0.024400, 0.017400, 0.013500}
**.server[*].app[1..].bursty_flow_size_multiplier = ${burstyFlowSizeMultiplier = 1}
**.server[*].app[1..].numRequestsToSend = 1
**.server[*].app[1..].distibutions_base_root = "./"

**.edge[*].eth[*].mac.queue.typename = ${edgeQueueType = "V2PIFO"}
**.edge[*].eth[*].mac.queue.dataCapacity = ${edgeQueueSizePacketBytes = 300000}B
**.edge[*].use_v2_pifo = ${edgeUseV2Pifo = true}
**.edge[*].eth[*].mac.queue.dropper_type = ${edgeDropperType = "FIFO"}
**.edge[*].eth[*].mac.queue.scheduler_type = ${edgeSchedulerType = "FIFO"}
**.edge[*].eth[*].mac.queue.dctcp_thresh = ${edgeQueueSizeDCTCPThresh = 65}

**.agg[*].eth[*].mac.queue.typename = ${aggQueueType = $edgeQueueType}
**.agg[*].eth[*].mac.queue.dataCapacity = ${aggQueueSizePacketBytes = $edgeQueueSizePacketBytes}B
**.agg[*].use_v2_pifo = ${aggUseV2Pifo = $edgeUseV2Pifo}
**.agg[*].eth[*].mac.queue.dropper_type = ${aggDropperType = $edgeDropperType}
**.agg[*].eth[*].mac.queue.scheduler_type = ${aggSchedulerType = $edgeSchedulerType}
**.agg[*].eth[*].mac.queue.dctcp_thresh = ${aggQueueSizeDCTCPThresh = $edgeQueueSizeDCTCPThresh}

**.core[*].eth[*].mac.queue.typename = ${coreQueueType = $edgeQueueType}
**.core[*].eth[*].mac.queue.dataCapacity = ${coreQueueSizePacketBytes = $edgeQueueSizePacketBytes}B
**.core[*].use_v2_pifo = ${coreUseV2Pifo = $edgeUseV2Pifo}
**.core[*].eth[*].mac.queue.dropper_type = ${coreDropperType = $edgeDropperType}
**.core[*].eth[*].mac.queue.scheduler_type = ${coreSchedulerType = $edgeSchedulerType}
**.core[*].eth[*].mac.queue.dctcp_thresh = ${coreQueueSizeDCTCPThresh = $edgeQueueSizeDCTCPThresh}

**.edge[*].eth[*].mac.typename = ${edgeMacTypeName = "AugmentedEtherMac"}
**.agg[*].eth[*].mac.typename = ${aggMacTypeName = $edgeMacTypeName}
**.core[*].eth[*].mac.typename = ${coreMacTypeName = $edgeMacTypeName}
**.edge[*].relayUnit.typename = ${edgeRelayTypeName = "BouncingIeee8021dRelay"}
**.agg[*].relayUnit.typename = ${aggRelayTypeName = $edgeRelayTypeName}
**.core[*].relayUnit.typename = ${coreRelayTypeName = $edgeRelayTypeName}

**.edge[*].bounce_randomly = ${edgeBounceRandomly = true}
**.edge[*].filter_out_full_ports = ${edgeFilterOutFullPorts = true}
**.edge[*].approximate_random_deflection = ${edgeApproximateRandomDeflection = true}
**.agg[*].bounce_randomly = ${aggBounceRandomly = $edgeBounceRandomly}
**.agg[*].filter_out_full_ports = ${aggFilterOutFullPorts = $edgeFilterOutFullPorts}
**.agg[*].approximate_random_deflection = ${aggApproximateRandomDeflection = $edgeApproximateRandomDeflection}
**.core[*].bounce_randomly = ${coreBounceRandomly = $edgeBounceRandomly}
**.core[*].filter_out_full_ports = ${coreFilterOutFullPorts = $edgeFilterOutFullPorts}
**.core[*].approximate_random_deflection = ${coreApproximateRandomDeflection = $edgeApproximateRandomDeflection}

**.edge[*].bounce_randomly_v2 = ${edgeBounceRandomlyPowerOfN = false}
**.agg[*].bounce_randomly_v2 = ${aggBounceRandomlyPowerOfN = $edgeBounceRandomlyPowerOfN}
**.core[*].bounce_randomly_v2 = ${coreBounceRandomlyPowerOfN = $edgeBounceRandomlyPowerOfN}
**.edge[*].random_power_bounce_factor = ${edgeBounceRandomlyPowerFactor = 2}
**.agg[*].random_power_bounce_factor = ${aggBounceRandomlyPowerFactor = $edgeBounceRandomlyPowerFactor}
**.core[*].random_power_bounce_factor = ${coreBounceRandomlyPowerFactor = $edgeBounceRandomlyPowerFactor}

**.edge[*].denominator_for_retrasnmissions = ${edgeDenomRet = 2}
**.agg[*].denominator_for_retrasnmissions = ${aggDenomRet = $edgeDenomRet}
**.core[*].denominator_for_retrasnmissions = ${coreDenomRet = $edgeDenomRet}

**.arp.typename = "GlobalArp"
**.edge[*].learn_mac_addresses = false
**.agg[*].learn_mac_addresses = false
**.core[*].learn_mac_addresses = false
**.edge[*].macTable.addressTableFile ="./MAC_Table_Data/fat_tree_edge[" + string(parentIndex()) + "].txt"
**.agg[*].macTable.addressTableFile ="./MAC_Table_Data/fat_tree_agg[" + string(parentIndex()) + "].txt"
**.core[*].macTable.addressTableFile ="./MAC_Table_Data/fat_tree_core[" + string(parentIndex()) + "].txt"

cmdenv-output-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.out
output-scalar-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.sca
output-vector-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.vec
eventlog-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.elog
snapshot-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.sna

**.server[*].numApps = ${server0NumApps = 1 + $numMiceBackgroundFlowAppsInEachServer + $numBurstyApps}
# (index() < 1 + $numMiceBackgroundFlowAppsInEachServer) ? Mice flow : Bursty
**.server[*].app[1..].is_bursty = ${server0IsBursty = index() < 1 + $numMiceBackgroundFlowAppsInEachServer ? false : true}
**.server[*].app[0].typename = "DCTcpGenericServerApp"
**.server[*].app[0].localPort = 80
**.server[*].app[1..].typename = "MultiSocketBasicClient"
**.server[*].app[1..].is_mice_background = ${serverIsMiceBackground = index() < 1 + $numMiceBackgroundFlowAppsInEachServer ? true : false}


########################################################################
[Config DCTCP_Vertigo_fattree]
network = FatTree

**.ipv4.ip.timeToLive = ${ttl = 250}
**.tcp.close_instead_of_timewait = ${closeInsteadOfWait = true}
**.tcp.FRs_disabled = ${FRsDisabled = false}
**.useECMP = ${usingECMP = false}
**.use_power_of_n_lb = ${usingPowerOfNLB = true}
**.edge[*].random_power_factor = ${edgeRandomPowerFactor = 2}
**.agg[*].random_power_factor = ${aggRandomPowerFactor = $edgeRandomPowerFactor}
**.core[*].random_power_factor = ${coreRandomPowerFactor = $edgeRandomPowerFactor}
**.tcp.tcpAlgorithmClass = "DCTcp"
**.tcp.ecnWillingness = ${ecnWill = true}

sim-time-limit = ${simTimeLimit = 1.2}s

**.ipv4.ip.should_use_v2_marking = ${shouldUseV2Marking = true}
**.ipv4.ip.marking_type = ${markingType = "SRPT"}
**.ipv4.ip.delta = ${markingTimer = 0.00036}s
**.ipv4.ip.has_ordering_layer = ${hasOrderingLayer = true}
**.ipv4.ip.omega = ${orderingTimer = 0.00036}s

FatTree.k = ${K = 8}
**.num_bursty_apps = ${numBurstyApps = 1}
**.server[*].app[1..].num_requests_per_burst = ${numReqPerBurst = 100}
**.num_mice_background_flow_apps_in_each_server = ${numMiceBackgroundFlowAppsInEachServer = 1}
**.num_elephant_background_flow_apps_in_each_server = ${numElephantBackgroundFlowAppsInEachServer = 0}

**.server[*].app[1..].startTime = 0s
**.server[*].app[1..].replyLength = ${incastFlowSize = 40000}B
**.server[*].app[1..].requestLength = 250B
**.server[*].app[1..].application_category = ${serverApplicationCategory = index() < 1 + $numMiceBackgroundFlowAppsInEachServer ? "cache" : "web"}
**.server[*].app[1..].background_inter_arrival_time_multiplier = ${bgInterArrivalMultiplier = 0.097500}
**.server[*].app[1..].background_flow_size_multiplier = ${bgFlowSizeMultiplier = 1}
**.server[*].app[1..].bursty_inter_arrival_time_multiplier = ${burstyInterArrivalMultiplier = 0.122000, 0.040600, 0.024400, 0.017400, 0.013500}
**.server[*].app[1..].bursty_flow_size_multiplier = ${burstyFlowSizeMultiplier = 1}
**.server[*].app[1..].numRequestsToSend = 1
**.server[*].app[1..].distibutions_base_root = "./"

**.edge[*].eth[*].mac.queue.typename = ${edgeQueueType = "V2PIFO"}
**.edge[*].eth[*].mac.queue.dataCapacity = ${edgeQueueSizePacketBytes = 300000}B
**.edge[*].use_v2_pifo = ${edgeUseV2Pifo = true}
**.edge[*].eth[*].mac.queue.dropper_type = ${edgeDropperType = "SRPT"}
**.edge[*].eth[*].mac.queue.scheduler_type = ${edgeSchedulerType = "SRPT"}
**.edge[*].eth[*].mac.queue.dctcp_thresh = ${edgeQueueSizeDCTCPThresh = 65}

**.agg[*].eth[*].mac.queue.typename = ${aggQueueType = $edgeQueueType}
**.agg[*].eth[*].mac.queue.dataCapacity = ${aggQueueSizePacketBytes = $edgeQueueSizePacketBytes}B
**.agg[*].use_v2_pifo = ${aggUseV2Pifo = $edgeUseV2Pifo}
**.agg[*].eth[*].mac.queue.dropper_type = ${aggDropperType = $edgeDropperType}
**.agg[*].eth[*].mac.queue.scheduler_type = ${aggSchedulerType = $edgeSchedulerType}
**.agg[*].eth[*].mac.queue.dctcp_thresh = ${aggQueueSizeDCTCPThresh = $edgeQueueSizeDCTCPThresh}

**.core[*].eth[*].mac.queue.typename = ${coreQueueType = $edgeQueueType}
**.core[*].eth[*].mac.queue.dataCapacity = ${coreQueueSizePacketBytes = $edgeQueueSizePacketBytes}B
**.core[*].use_v2_pifo = ${coreUseV2Pifo = $edgeUseV2Pifo}
**.core[*].eth[*].mac.queue.dropper_type = ${coreDropperType = $edgeDropperType}
**.core[*].eth[*].mac.queue.scheduler_type = ${coreSchedulerType = $edgeSchedulerType}
**.core[*].eth[*].mac.queue.dctcp_thresh = ${coreQueueSizeDCTCPThresh = $edgeQueueSizeDCTCPThresh}

**.edge[*].eth[*].mac.typename = ${edgeMacTypeName = "AugmentedEtherMac"}
**.agg[*].eth[*].mac.typename = ${aggMacTypeName = $edgeMacTypeName}
**.core[*].eth[*].mac.typename = ${coreMacTypeName = $edgeMacTypeName}
**.edge[*].relayUnit.typename = ${edgeRelayTypeName = "BouncingIeee8021dRelay"}
**.agg[*].relayUnit.typename = ${aggRelayTypeName = $edgeRelayTypeName}
**.core[*].relayUnit.typename = ${coreRelayTypeName = $edgeRelayTypeName}

**.edge[*].bounce_randomly = ${edgeBounceRandomly = false}
**.agg[*].bounce_randomly = ${aggBounceRandomly = $edgeBounceRandomly}
**.core[*].bounce_randomly = ${coreBounceRandomly = $edgeBounceRandomly}

**.edge[*].bounce_randomly_v2 = ${edgeBounceRandomlyPowerOfN = true}
**.agg[*].bounce_randomly_v2 = ${aggBounceRandomlyPowerOfN = $edgeBounceRandomlyPowerOfN}
**.core[*].bounce_randomly_v2 = ${coreBounceRandomlyPowerOfN = $edgeBounceRandomlyPowerOfN}
**.edge[*].random_power_bounce_factor = ${edgeBounceRandomlyPowerFactor = 2}
**.agg[*].random_power_bounce_factor = ${aggBounceRandomlyPowerFactor = $edgeBounceRandomlyPowerFactor}
**.core[*].random_power_bounce_factor = ${coreBounceRandomlyPowerFactor = $edgeBounceRandomlyPowerFactor}

**.edge[*].denominator_for_retrasnmissions = ${edgeDenomRet = 2}
**.agg[*].denominator_for_retrasnmissions = ${aggDenomRet = $edgeDenomRet}
**.core[*].denominator_for_retrasnmissions = ${coreDenomRet = $edgeDenomRet}

**.arp.typename = "GlobalArp"
**.edge[*].learn_mac_addresses = false
**.agg[*].learn_mac_addresses = false
**.core[*].learn_mac_addresses = false
**.edge[*].macTable.addressTableFile ="./MAC_Table_Data/fat_tree_edge[" + string(parentIndex()) + "].txt"
**.agg[*].macTable.addressTableFile ="./MAC_Table_Data/fat_tree_agg[" + string(parentIndex()) + "].txt"
**.core[*].macTable.addressTableFile ="./MAC_Table_Data/fat_tree_core[" + string(parentIndex()) + "].txt"

cmdenv-output-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.out
output-scalar-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.sca
output-vector-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.vec
eventlog-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.elog
snapshot-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.sna

**.server[*].numApps = ${server0NumApps = 1 + $numMiceBackgroundFlowAppsInEachServer + $numBurstyApps}
# (index() < 1 + $numMiceBackgroundFlowAppsInEachServer) ? Mice flow : Bursty
**.server[*].app[1..].is_bursty = ${server0IsBursty = index() < 1 + $numMiceBackgroundFlowAppsInEachServer ? false : true}
**.server[*].app[0].typename = "DCTcpGenericServerApp"
**.server[*].app[0].localPort = 80
**.server[*].app[1..].typename = "MultiSocketBasicClient"
**.server[*].app[1..].is_mice_background = ${serverIsMiceBackground = index() < 1 + $numMiceBackgroundFlowAppsInEachServer ? true : false}



################################## NEW SETTING ######################################################



[Config DCTCP_AIFO_fattree]

############ REQUIRES POTENTIAL CHANGE #######################
network = FatTree

**.ipv4.ip.timeToLive = ${ttl = 250}
**.tcp.close_instead_of_timewait = ${closeInsteadOfWait = true}
**.tcp.FRs_disabled = ${FRsDisabled = false}
**.useECMP = ${usingECMP = true}
**.use_power_of_n_lb = ${usingPowerOfNLB = false}
**.edge[*].random_power_factor = ${edgeRandomPowerFactor = 2}
**.agg[*].random_power_factor = ${aggRandomPowerFactor = $edgeRandomPowerFactor}
**.core[*].random_power_factor = ${coreRandomPowerFactor = $edgeRandomPowerFactor}
**.tcp.tcpAlgorithmClass = "DCTcp"
**.tcp.ecnWillingness = ${ecnWill = true}

###############################V2 setting###################
**.ipv4.ip.should_use_v2_marking = ${shouldUseV2Marking = true}
**.ipv4.ip.marking_type = ${markingType = "SRPT"}
#**.ipv4.ip.packet_hash_table_size = 3
#**.ipv4.ip.flow_hash_table_size = 1
**.ipv4.ip.delta = ${markingTimer = 0.00036}s

**.ipv4.ip.has_ordering_layer = ${hasOrderingLayer = false}
**.ipv4.ip.omega = ${orderingTimer = 0.00036}s
###############################V2 setting###################


repeat = 1
sim-time-limit = ${simTimeLimit = 1.2}s


FatTree.k = ${K = 8}
**.num_bursty_apps = ${numBurstyApps = 1}
**.server[*].app[1..].num_requests_per_burst = ${numReqPerBurst = 100}
**.num_mice_background_flow_apps_in_each_server = ${numMiceBackgroundFlowAppsInEachServer = 1}
**.num_elephant_background_flow_apps_in_each_server = ${numElephantBackgroundFlowAppsInEachServer = 0}

**.server[*].app[1..].startTime = 0s
**.server[*].app[1..].replyLength = ${incastFlowSize = 40000}B
**.server[*].app[1..].requestLength = 250B
**.server[*].app[1..].application_category = ${serverApplicationCategory = index() < 1 + $numMiceBackgroundFlowAppsInEachServer ? "cache" : "web"}
**.server[*].app[1..].background_inter_arrival_time_multiplier = ${bgInterArrivalMultiplier = 0.097500}
**.server[*].app[1..].background_flow_size_multiplier = ${bgFlowSizeMultiplier = 1}
**.server[*].app[1..].bursty_inter_arrival_time_multiplier = ${burstyInterArrivalMultiplier = 0.122000, 0.040600, 0.024400, 0.017400, 0.013500}
**.server[*].app[1..].bursty_flow_size_multiplier = ${burstyFlowSizeMultiplier = 1}
**.server[*].app[1..].numRequestsToSend = 1
**.server[*].app[1..].distibutions_base_root = "./"

**.edge[*].eth[*].mac.queue.typename = ${edgeQueueType = "V2PIFOPrioQueue"}
**.edge[*].eth[*].mac.queue.per_queue_dataCapacity = ${edgePerQueueSizePacketBytes = 300000}B	# 300KB / 8
**.edge[*].eth[*].mac.queue.queue_num = ${edgeQueueNum = 1}
**.edge[*].v2pifo_queue_type = ${edgeV2pifoQueueType = "prio"}
**.edge[*].use_vertigo_prio_queue = ${edgeUseVertigoPrioQueue = true}
**.edge[*].eth[*].mac.queue.dctcp_thresh = ${edgeQueueSizeDCTCPThresh = 65}
**.edge[*].eth[*].mac.queue.aifo_k = ${edgeAIFOK = 0.1}
**.edge[*].eth[*].mac.queue.quantile_wind_size = ${edgeQuantileWindSize = 20}
**.edge[*].eth[*].mac.queue.aifo_sample_count = ${edgeAIFOSampleCount = 15}
**.edge[*].eth[*].mac.queue.priority_mapping_scheme = ${edgePriorityMappingScheme = "AIFO"}

**.agg[*].eth[*].mac.queue.typename = ${aggQueueType = $edgeQueueType}
**.agg[*].eth[*].mac.queue.per_queue_dataCapacity = ${aggPerQueueSizePacketBytes = $edgePerQueueSizePacketBytes}B	# 300KB / 8
**.agg[*].eth[*].mac.queue.queue_num = ${aggQueueNum = $edgeQueueNum}
**.agg[*].v2pifo_queue_type = ${aggV2pifoQueueType = $edgeV2pifoQueueType}
**.agg[*].use_vertigo_prio_queue = ${aggUseVertigoPrioQueue = $edgeUseVertigoPrioQueue}
**.agg[*].eth[*].mac.queue.dctcp_thresh = ${aggQueueSizeDCTCPThresh = $edgeQueueSizeDCTCPThresh}
**.agg[*].eth[*].mac.queue.aifo_k = ${aggAIFOK = $edgeAIFOK}
**.agg[*].eth[*].mac.queue.quantile_wind_size = ${aggQuantileWindSize = $edgeQuantileWindSize}
**.agg[*].eth[*].mac.queue.aifo_sample_count = ${aggAIFOSampleCount = $edgeAIFOSampleCount}
**.agg[*].eth[*].mac.queue.priority_mapping_scheme = ${aggPriorityMappingScheme = $edgePriorityMappingScheme}

**.core[*].eth[*].mac.queue.typename = ${coreQueueType = $edgeQueueType}
**.core[*].eth[*].mac.queue.per_queue_dataCapacity = ${corePerQueueSizePacketBytes = $edgePerQueueSizePacketBytes}B	# 300KB / 8
**.core[*].eth[*].mac.queue.queue_num = ${coreQueueNum = $edgeQueueNum}
**.core[*].v2pifo_queue_type = ${coreV2pifoQueueType = $edgeV2pifoQueueType}
**.core[*].use_vertigo_prio_queue = ${coreUseVertigoPrioQueue = $edgeUseVertigoPrioQueue}
**.core[*].eth[*].mac.queue.dctcp_thresh = ${coreQueueSizeDCTCPThresh = $edgeQueueSizeDCTCPThresh}
**.core[*].eth[*].mac.queue.aifo_k = ${coreAIFOK = $edgeAIFOK}
**.core[*].eth[*].mac.queue.quantile_wind_size = ${coreQuantileWindSize = $edgeQuantileWindSize}
**.core[*].eth[*].mac.queue.aifo_sample_count = ${coreAIFOSampleCount = $edgeAIFOSampleCount}
**.core[*].eth[*].mac.queue.priority_mapping_scheme = ${corePriorityMappingScheme = $edgePriorityMappingScheme}

**.edge[*].use_memory = ${edgeUseMemory = false}
**.edge[*].random_power_memory_size = ${edgePowerMemSize = 1}
**.edge[*].random_power_bounce_memory_size = ${edgePowerBounceMemSize = 1}

**.agg[*].use_memory = ${aggUseMemory = $edgeUseMemory}
**.agg[*].random_power_memory_size = ${aggPowerMemSize = $edgePowerMemSize}
**.agg[*].random_power_bounce_memory_size = ${aggPowerBounceMemSize = $edgePowerBounceMemSize}

**.core[*].use_memory = ${coreUseMemory = $edgeUseMemory}
**.core[*].random_power_memory_size = ${corePowerMemSize = $edgePowerMemSize}
**.core[*].random_power_bounce_memory_size = ${corePowerBounceMemSize = $edgePowerBounceMemSize}

**.edge[*].eth[*].mac.typename = ${edgeMacTypeName = "AugmentedEtherMac"}
**.agg[*].eth[*].mac.typename = ${aggMacTypeName = $edgeMacTypeName}
**.core[*].eth[*].mac.typename = ${coreMacTypeName = $edgeMacTypeName}

**.edge[*].relayUnit.typename = ${edgeRelayTypeName = "BouncingIeee8021dRelay"}
**.agg[*].relayUnit.typename = ${aggRelayTypeName = $edgeRelayTypeName}
**.core[*].relayUnit.typename = ${coreRelayTypeName = $edgeRelayTypeName}

**.server[*].app[1..].use_jitter = ${server0UseJitter = false}

**.edge[*].bounce_randomly = ${edgeBounceRandomly = false}
**.agg[*].bounce_randomly = ${aggBounceRandomly = $edgeBounceRandomly}
**.core[*].bounce_randomly = ${coreBounceRandomly = $edgeBounceRandomly}

**.edge[*].bounce_on_same_path = ${edgeBounceOnSamePath = false}
**.agg[*].bounce_on_same_path = ${aggBounceOnSamePath = $edgeBounceOnSamePath}
**.core[*].bounce_on_same_path = ${coreBounceOnSamePath = $edgeBounceOnSamePath}
**.server[*].forwarding = ${serverForwarding = $aggBounceOnSamePath}

**.edge[*].bounce_randomly_v2 = ${edgeBounceRandomlyPowerOfN = false}
**.agg[*].bounce_randomly_v2 = ${aggBounceRandomlyPowerOfN = $edgeBounceRandomlyPowerOfN}
**.core[*].bounce_randomly_v2 = ${coreBounceRandomlyPowerOfN = $edgeBounceRandomlyPowerOfN}

**.edge[*].random_power_bounce_factor = ${edgeBounceRandomlyPowerFactor = 2}
**.agg[*].random_power_bounce_factor = ${aggBounceRandomlyPowerFactor = $edgeBounceRandomlyPowerFactor}
**.core[*].random_power_bounce_factor = ${coreBounceRandomlyPowerFactor = $edgeBounceRandomlyPowerFactor}

**.edge[*].denominator_for_retrasnmissions = ${edgeDenomRet = 2}
**.agg[*].denominator_for_retrasnmissions = ${aggDenomRet = $edgeDenomRet}
**.core[*].denominator_for_retrasnmissions = ${coreDenomRet = $edgeDenomRet}

**.arp.typename = "GlobalArp"
**.edge[*].learn_mac_addresses = false
**.agg[*].learn_mac_addresses = false
**.core[*].learn_mac_addresses = false
**.edge[*].macTable.addressTableFile ="./MAC_Table_Data/fat_tree_edge[" + string(parentIndex()) + "].txt"
**.agg[*].macTable.addressTableFile ="./MAC_Table_Data/fat_tree_agg[" + string(parentIndex()) + "].txt"
**.core[*].macTable.addressTableFile ="./MAC_Table_Data/fat_tree_core[" + string(parentIndex()) + "].txt"

cmdenv-output-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.out
output-scalar-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.sca
output-vector-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.vec
eventlog-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.elog
snapshot-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.sna

##############################################################


**.server[*].numApps = ${server0NumApps = 1 + $numMiceBackgroundFlowAppsInEachServer + $numBurstyApps}
# (index() < 1 + $numMiceBackgroundFlowAppsInEachServer) ? Mice flow : Bursty
**.server[*].app[1..].is_bursty = ${server0IsBursty = index() < 1 + $numMiceBackgroundFlowAppsInEachServer ? false : true}
**.server[*].app[0].typename = "DCTcpGenericServerApp"
**.server[*].app[0].localPort = 80
**.server[*].app[1..].typename = "MultiSocketBasicClient"
**.server[*].app[1..].is_mice_background = ${serverIsMiceBackground = index() < 1 + $numMiceBackgroundFlowAppsInEachServer ? true : false}





################################## NEW SETTING ######################################################



[Config DCTCP_QUANTILE_PD_fattree]

############ REQUIRES POTENTIAL CHANGE #######################
network = FatTree

**.ipv4.ip.timeToLive = ${ttl = 250}
**.tcp.close_instead_of_timewait = ${closeInsteadOfWait = true}
**.tcp.FRs_disabled = ${FRsDisabled = false}
**.useECMP = ${usingECMP = false}
**.use_power_of_n_lb = ${usingPowerOfNLB = true}
**.edge[*].random_power_factor = ${edgeRandomPowerFactor = 2}
**.agg[*].random_power_factor = ${aggRandomPowerFactor = $edgeRandomPowerFactor}
**.core[*].random_power_factor = ${coreRandomPowerFactor = $edgeRandomPowerFactor}
**.tcp.tcpAlgorithmClass = "DCTcp"
**.tcp.ecnWillingness = ${ecnWill = true}


###############################V2 setting###################
**.ipv4.ip.should_use_v2_marking = ${shouldUseV2Marking = true}
**.ipv4.ip.marking_type = ${markingType = "SRPT"}
#**.ipv4.ip.packet_hash_table_size = 3
#**.ipv4.ip.flow_hash_table_size = 1
**.ipv4.ip.delta = ${markingTimer = 0.00036}s

**.ipv4.ip.has_ordering_layer = ${hasOrderingLayer = true}
**.ipv4.ip.omega = ${orderingTimer = 0.00036}s
###############################V2 setting###################


repeat = 1
sim-time-limit = ${simTimeLimit = 1.2}s


FatTree.k = ${K = 8}
**.num_bursty_apps = ${numBurstyApps = 1}
**.server[*].app[1..].num_requests_per_burst = ${numReqPerBurst = 100}
**.num_mice_background_flow_apps_in_each_server = ${numMiceBackgroundFlowAppsInEachServer = 1}
**.num_elephant_background_flow_apps_in_each_server = ${numElephantBackgroundFlowAppsInEachServer = 0}

**.server[*].app[1..].startTime = 0s
**.server[*].app[1..].replyLength = ${incastFlowSize = 40000}B
**.server[*].app[1..].requestLength = 250B
**.server[*].app[1..].application_category = ${serverApplicationCategory = index() < 1 + $numMiceBackgroundFlowAppsInEachServer ? "cache" : "web"}
**.server[*].app[1..].background_inter_arrival_time_multiplier = ${bgInterArrivalMultiplier = 0.097500}
**.server[*].app[1..].background_flow_size_multiplier = ${bgFlowSizeMultiplier = 1}
**.server[*].app[1..].bursty_inter_arrival_time_multiplier = ${burstyInterArrivalMultiplier = 0.122, 0.0406, 0.0244, 0.0174, 0.0135}
**.server[*].app[1..].bursty_flow_size_multiplier = ${burstyFlowSizeMultiplier = 1}
**.server[*].app[1..].numRequestsToSend = 1
**.server[*].app[1..].distibutions_base_root = "./"

**.edge[*].eth[*].mac.queue.typename = ${edgeQueueType = "V2PIFOCanaryQueue"}
**.edge[*].eth[*].mac.queue.dataCapacity = ${edgePerQueueSizePacketBytes = 300000}B	# 300KB / 8
**.edge[*].v2pifo_queue_type = ${edgeV2pifoQueueType = "canary"}
**.edge[*].use_vertigo_prio_queue = ${edgeUseVertigoPrioQueue = true}
**.edge[*].eth[*].mac.queue.dctcp_thresh = ${edgeQueueSizeDCTCPThresh = 65}
**.edge[*].eth[*].mac.queue.algorithm_type = ${edgeAlgorithmType = "DETERMINISTIC"}
**.edge[*].eth[*].mac.queue.relative_priority_calculation_type = ${edgeRelativePriorityCalculationType = "PERCENTILE"}
**.edge[*].eth[*].mac.queue.relative_priority_distribution_type = ${edgeRelativePriorityDistributionType = "EXPONENTIAL"}
**.edge[*].eth[*].mac.queue.minth = ${edgeMinTh = 75000}
**.edge[*].eth[*].mac.queue.k = ${edgeAIFOK = 0.9}
**.edge[*].eth[*].mac.queue.quantile_wind_size = ${edgeQuantileWindSize = 20}
**.edge[*].eth[*].mac.queue.aifo_sample_count = ${edgeAIFOSampleCount = 20}

**.agg[*].eth[*].mac.queue.typename = ${aggQueueType = $edgeQueueType}
**.agg[*].eth[*].mac.queue.dataCapacity = ${aggPerQueueSizePacketBytes = $edgePerQueueSizePacketBytes}B	# 300KB / 8
**.agg[*].v2pifo_queue_type = ${aggV2pifoQueueType = $edgeV2pifoQueueType}
**.agg[*].use_vertigo_prio_queue = ${aggUseVertigoPrioQueue = $edgeUseVertigoPrioQueue}
**.agg[*].eth[*].mac.queue.dctcp_thresh = ${aggQueueSizeDCTCPThresh = $edgeQueueSizeDCTCPThresh}
**.agg[*].eth[*].mac.queue.algorithm_type = ${aggAlgorithmType = $edgeAlgorithmType}
**.agg[*].eth[*].mac.queue.relative_priority_calculation_type = ${aggRelativePriorityCalculationType = $edgeRelativePriorityCalculationType}
**.agg[*].eth[*].mac.queue.relative_priority_distribution_type = ${aggRelativePriorityDistributionType = $edgeRelativePriorityDistributionType}
**.agg[*].eth[*].mac.queue.minth = ${aggMinTh = $edgeMinTh}
**.agg[*].eth[*].mac.queue.k = ${aggAIFOK = $edgeAIFOK}
**.agg[*].eth[*].mac.queue.quantile_wind_size = ${aggQuantileWindSize = $edgeQuantileWindSize}
**.agg[*].eth[*].mac.queue.aifo_sample_count = ${aggAIFOSampleCount = $edgeAIFOSampleCount}

**.core[*].eth[*].mac.queue.typename = ${coreQueueType = $edgeQueueType}
**.core[*].eth[*].mac.queue.dataCapacity = ${corePerQueueSizePacketBytes = $edgePerQueueSizePacketBytes}B	# 300KB / 8
**.core[*].v2pifo_queue_type = ${coreV2pifoQueueType = $edgeV2pifoQueueType}
**.core[*].use_vertigo_prio_queue = ${coreUseVertigoPrioQueue = $edgeUseVertigoPrioQueue}
**.core[*].eth[*].mac.queue.dctcp_thresh = ${coreQueueSizeDCTCPThresh = $edgeQueueSizeDCTCPThresh}
**.core[*].eth[*].mac.queue.algorithm_type = ${coreAlgorithmType = $edgeAlgorithmType}
**.core[*].eth[*].mac.queue.relative_priority_calculation_type = ${coreRelativePriorityCalculationType = $edgeRelativePriorityCalculationType}
**.core[*].eth[*].mac.queue.relative_priority_distribution_type = ${coreRelativePriorityDistributionType = $edgeRelativePriorityDistributionType}
**.core[*].eth[*].mac.queue.minth = ${coreMinTh = $edgeMinTh}
**.core[*].eth[*].mac.queue.k = ${coreAIFOK = $edgeAIFOK}
**.core[*].eth[*].mac.queue.quantile_wind_size = ${coreQuantileWindSize = $edgeQuantileWindSize}
**.core[*].eth[*].mac.queue.aifo_sample_count = ${coreAIFOSampleCount = $edgeAIFOSampleCount}

**.edge[*].use_memory = ${edgeUseMemory = false}
**.edge[*].random_power_memory_size = ${edgePowerMemSize = 1}
**.edge[*].random_power_bounce_memory_size = ${edgePowerBounceMemSize = 1}

**.agg[*].use_memory = ${aggUseMemory = $edgeUseMemory}
**.agg[*].random_power_memory_size = ${aggPowerMemSize = $edgePowerMemSize}
**.agg[*].random_power_bounce_memory_size = ${aggPowerBounceMemSize = $edgePowerBounceMemSize}

**.core[*].use_memory = ${coreUseMemory = $edgeUseMemory}
**.core[*].random_power_memory_size = ${corePowerMemSize = $edgePowerMemSize}
**.core[*].random_power_bounce_memory_size = ${corePowerBounceMemSize = $edgePowerBounceMemSize}

**.edge[*].eth[*].mac.typename = ${edgeMacTypeName = "AugmentedEtherMac"}
**.agg[*].eth[*].mac.typename = ${aggMacTypeName = $edgeMacTypeName}
**.core[*].eth[*].mac.typename = ${coreMacTypeName = $edgeMacTypeName}

**.edge[*].relayUnit.typename = ${edgeRelayTypeName = "BouncingIeee8021dRelay"}
**.agg[*].relayUnit.typename = ${aggRelayTypeName = $edgeRelayTypeName}
**.core[*].relayUnit.typename = ${coreRelayTypeName = $edgeRelayTypeName}

**.server[*].app[1..].use_jitter = ${server0UseJitter = false}

**.edge[*].bounce_randomly = ${edgeBounceRandomly = false}
**.agg[*].bounce_randomly = ${aggBounceRandomly = $edgeBounceRandomly}
**.core[*].bounce_randomly = ${coreBounceRandomly = $edgeBounceRandomly}

**.edge[*].bounce_on_same_path = ${edgeBounceOnSamePath = false}
**.agg[*].bounce_on_same_path = ${aggBounceOnSamePath = $edgeBounceOnSamePath}
**.core[*].bounce_on_same_path = ${coreBounceOnSamePath = $edgeBounceOnSamePath}
**.server[*].forwarding = ${serverForwarding = $aggBounceOnSamePath}

**.edge[*].bounce_randomly_v2 = ${edgeBounceRandomlyPowerOfN = true}
**.agg[*].bounce_randomly_v2 = ${aggBounceRandomlyPowerOfN = $edgeBounceRandomlyPowerOfN}
**.core[*].bounce_randomly_v2 = ${coreBounceRandomlyPowerOfN = $edgeBounceRandomlyPowerOfN}

**.edge[*].random_power_bounce_factor = ${edgeBounceRandomlyPowerFactor = 2}
**.agg[*].random_power_bounce_factor = ${aggBounceRandomlyPowerFactor = $edgeBounceRandomlyPowerFactor}
**.core[*].random_power_bounce_factor = ${coreBounceRandomlyPowerFactor = $edgeBounceRandomlyPowerFactor}

**.edge[*].denominator_for_retrasnmissions = ${edgeDenomRet = 2}
**.agg[*].denominator_for_retrasnmissions = ${aggDenomRet = $edgeDenomRet}
**.core[*].denominator_for_retrasnmissions = ${coreDenomRet = $edgeDenomRet}

**.arp.typename = "GlobalArp"
**.edge[*].learn_mac_addresses = false
**.agg[*].learn_mac_addresses = false
**.core[*].learn_mac_addresses = false
**.edge[*].macTable.addressTableFile ="./MAC_Table_Data/fat_tree_edge[" + string(parentIndex()) + "].txt"
**.agg[*].macTable.addressTableFile ="./MAC_Table_Data/fat_tree_agg[" + string(parentIndex()) + "].txt"
**.core[*].macTable.addressTableFile ="./MAC_Table_Data/fat_tree_core[" + string(parentIndex()) + "].txt"

cmdenv-output-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.out
output-scalar-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.sca
output-vector-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.vec
eventlog-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.elog
snapshot-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.sna

##############################################################


**.server[*].numApps = ${server0NumApps = 1 + $numMiceBackgroundFlowAppsInEachServer + $numBurstyApps}
# (index() < 1 + $numMiceBackgroundFlowAppsInEachServer) ? Mice flow : Bursty
**.server[*].app[1..].is_bursty = ${server0IsBursty = index() < 1 + $numMiceBackgroundFlowAppsInEachServer ? false : true}
**.server[*].app[0].typename = "DCTcpGenericServerApp"
**.server[*].app[0].localPort = 80
**.server[*].app[1..].typename = "MultiSocketBasicClient"
**.server[*].app[1..].is_mice_background = ${serverIsMiceBackground = index() < 1 + $numMiceBackgroundFlowAppsInEachServer ? true : false}





################################## NEW SETTING ######################################################



[Config DCTCP_DIST_PD_fattree]

############ REQUIRES POTENTIAL CHANGE #######################
network = FatTree

**.ipv4.ip.timeToLive = ${ttl = 250}
**.tcp.close_instead_of_timewait = ${closeInsteadOfWait = true}
**.tcp.FRs_disabled = ${FRsDisabled = false}
**.useECMP = ${usingECMP = false}
**.use_power_of_n_lb = ${usingPowerOfNLB = true}
**.edge[*].random_power_factor = ${edgeRandomPowerFactor = 2}
**.agg[*].random_power_factor = ${aggRandomPowerFactor = $edgeRandomPowerFactor}
**.core[*].random_power_factor = ${coreRandomPowerFactor = $edgeRandomPowerFactor}
**.tcp.tcpAlgorithmClass = "DCTcp"
**.tcp.ecnWillingness = ${ecnWill = true}


###############################V2 setting###################
**.ipv4.ip.should_use_v2_marking = ${shouldUseV2Marking = true}
**.ipv4.ip.marking_type = ${markingType = "SRPT"}
#**.ipv4.ip.packet_hash_table_size = 3
#**.ipv4.ip.flow_hash_table_size = 1
**.ipv4.ip.delta = ${markingTimer = 0.00036}s

**.ipv4.ip.has_ordering_layer = ${hasOrderingLayer = true}
**.ipv4.ip.omega = ${orderingTimer = 0.00036}s
###############################V2 setting###################


repeat = 1
sim-time-limit = ${simTimeLimit = 1.2}s


FatTree.k = ${K = 8}
**.num_bursty_apps = ${numBurstyApps = 1}
**.server[*].app[1..].num_requests_per_burst = ${numReqPerBurst = 100}
**.num_mice_background_flow_apps_in_each_server = ${numMiceBackgroundFlowAppsInEachServer = 1}
**.num_elephant_background_flow_apps_in_each_server = ${numElephantBackgroundFlowAppsInEachServer = 0}

**.server[*].app[1..].startTime = 0s
**.server[*].app[1..].replyLength = ${incastFlowSize = 40000}B
**.server[*].app[1..].requestLength = 250B
**.server[*].app[1..].application_category = ${serverApplicationCategory = index() < 1 + $numMiceBackgroundFlowAppsInEachServer ? "cache" : "web"}
**.server[*].app[1..].background_inter_arrival_time_multiplier = ${bgInterArrivalMultiplier = 0.097500}
**.server[*].app[1..].background_flow_size_multiplier = ${bgFlowSizeMultiplier = 1}
**.server[*].app[1..].bursty_inter_arrival_time_multiplier = ${burstyInterArrivalMultiplier = 0.122, 0.0406, 0.0244, 0.0174, 0.0135}
**.server[*].app[1..].bursty_flow_size_multiplier = ${burstyFlowSizeMultiplier = 1}
**.server[*].app[1..].numRequestsToSend = 1
**.server[*].app[1..].distibutions_base_root = "./"

**.edge[*].eth[*].mac.queue.typename = ${edgeQueueType = "V2PIFOCanaryQueue"}
**.edge[*].eth[*].mac.queue.dataCapacity = ${edgePerQueueSizePacketBytes = 300000}B	# 300KB / 8
**.edge[*].v2pifo_queue_type = ${edgeV2pifoQueueType = "canary"}
**.edge[*].use_vertigo_prio_queue = ${edgeUseVertigoPrioQueue = true}
**.edge[*].eth[*].mac.queue.dctcp_thresh = ${edgeQueueSizeDCTCPThresh = 65}
**.edge[*].eth[*].mac.queue.algorithm_type = ${edgeAlgorithmType = "DETERMINISTIC"}
**.edge[*].eth[*].mac.queue.relative_priority_calculation_type = ${edgeRelativePriorityCalculationType = "DISTRIBUTION"}
**.edge[*].eth[*].mac.queue.relative_priority_distribution_type = ${edgeRelativePriorityDistributionType = "EXPONENTIAL"}
**.edge[*].eth[*].mac.queue.minth = ${edgeMinTh = 75000}
**.edge[*].eth[*].mac.queue.k = ${edgeAIFOK = 0.9}
**.edge[*].eth[*].mac.queue.quantile_wind_size = ${edgeQuantileWindSize = 20}
**.edge[*].eth[*].mac.queue.aifo_sample_count = ${edgeAIFOSampleCount = 20}

**.agg[*].eth[*].mac.queue.typename = ${aggQueueType = $edgeQueueType}
**.agg[*].eth[*].mac.queue.dataCapacity = ${aggPerQueueSizePacketBytes = $edgePerQueueSizePacketBytes}B	# 300KB / 8
**.agg[*].v2pifo_queue_type = ${aggV2pifoQueueType = $edgeV2pifoQueueType}
**.agg[*].use_vertigo_prio_queue = ${aggUseVertigoPrioQueue = $edgeUseVertigoPrioQueue}
**.agg[*].eth[*].mac.queue.dctcp_thresh = ${aggQueueSizeDCTCPThresh = $edgeQueueSizeDCTCPThresh}
**.agg[*].eth[*].mac.queue.algorithm_type = ${aggAlgorithmType = $edgeAlgorithmType}
**.agg[*].eth[*].mac.queue.relative_priority_calculation_type = ${aggRelativePriorityCalculationType = $edgeRelativePriorityCalculationType}
**.agg[*].eth[*].mac.queue.relative_priority_distribution_type = ${aggRelativePriorityDistributionType = $edgeRelativePriorityDistributionType}
**.agg[*].eth[*].mac.queue.minth = ${aggMinTh = $edgeMinTh}
**.agg[*].eth[*].mac.queue.k = ${aggAIFOK = $edgeAIFOK}
**.agg[*].eth[*].mac.queue.quantile_wind_size = ${aggQuantileWindSize = $edgeQuantileWindSize}
**.agg[*].eth[*].mac.queue.aifo_sample_count = ${aggAIFOSampleCount = $edgeAIFOSampleCount}

**.core[*].eth[*].mac.queue.typename = ${coreQueueType = $edgeQueueType}
**.core[*].eth[*].mac.queue.dataCapacity = ${corePerQueueSizePacketBytes = $edgePerQueueSizePacketBytes}B	# 300KB / 8
**.core[*].v2pifo_queue_type = ${coreV2pifoQueueType = $edgeV2pifoQueueType}
**.core[*].use_vertigo_prio_queue = ${coreUseVertigoPrioQueue = $edgeUseVertigoPrioQueue}
**.core[*].eth[*].mac.queue.dctcp_thresh = ${coreQueueSizeDCTCPThresh = $edgeQueueSizeDCTCPThresh}
**.core[*].eth[*].mac.queue.algorithm_type = ${coreAlgorithmType = $edgeAlgorithmType}
**.core[*].eth[*].mac.queue.relative_priority_calculation_type = ${coreRelativePriorityCalculationType = $edgeRelativePriorityCalculationType}
**.core[*].eth[*].mac.queue.relative_priority_distribution_type = ${coreRelativePriorityDistributionType = $edgeRelativePriorityDistributionType}
**.core[*].eth[*].mac.queue.minth = ${coreMinTh = $edgeMinTh}
**.core[*].eth[*].mac.queue.k = ${coreAIFOK = $edgeAIFOK}
**.core[*].eth[*].mac.queue.quantile_wind_size = ${coreQuantileWindSize = $edgeQuantileWindSize}
**.core[*].eth[*].mac.queue.aifo_sample_count = ${coreAIFOSampleCount = $edgeAIFOSampleCount}

**.edge[*].use_memory = ${edgeUseMemory = false}
**.edge[*].random_power_memory_size = ${edgePowerMemSize = 1}
**.edge[*].random_power_bounce_memory_size = ${edgePowerBounceMemSize = 1}

**.agg[*].use_memory = ${aggUseMemory = $edgeUseMemory}
**.agg[*].random_power_memory_size = ${aggPowerMemSize = $edgePowerMemSize}
**.agg[*].random_power_bounce_memory_size = ${aggPowerBounceMemSize = $edgePowerBounceMemSize}

**.core[*].use_memory = ${coreUseMemory = $edgeUseMemory}
**.core[*].random_power_memory_size = ${corePowerMemSize = $edgePowerMemSize}
**.core[*].random_power_bounce_memory_size = ${corePowerBounceMemSize = $edgePowerBounceMemSize}

**.edge[*].eth[*].mac.typename = ${edgeMacTypeName = "AugmentedEtherMac"}
**.agg[*].eth[*].mac.typename = ${aggMacTypeName = $edgeMacTypeName}
**.core[*].eth[*].mac.typename = ${coreMacTypeName = $edgeMacTypeName}

**.edge[*].relayUnit.typename = ${edgeRelayTypeName = "BouncingIeee8021dRelay"}
**.agg[*].relayUnit.typename = ${aggRelayTypeName = $edgeRelayTypeName}
**.core[*].relayUnit.typename = ${coreRelayTypeName = $edgeRelayTypeName}

**.server[*].app[1..].use_jitter = ${server0UseJitter = false}

**.edge[*].bounce_randomly = ${edgeBounceRandomly = false}
**.agg[*].bounce_randomly = ${aggBounceRandomly = $edgeBounceRandomly}
**.core[*].bounce_randomly = ${coreBounceRandomly = $edgeBounceRandomly}

**.edge[*].bounce_on_same_path = ${edgeBounceOnSamePath = false}
**.agg[*].bounce_on_same_path = ${aggBounceOnSamePath = $edgeBounceOnSamePath}
**.core[*].bounce_on_same_path = ${coreBounceOnSamePath = $edgeBounceOnSamePath}
**.server[*].forwarding = ${serverForwarding = $aggBounceOnSamePath}

**.edge[*].bounce_randomly_v2 = ${edgeBounceRandomlyPowerOfN = true}
**.agg[*].bounce_randomly_v2 = ${aggBounceRandomlyPowerOfN = $edgeBounceRandomlyPowerOfN}
**.core[*].bounce_randomly_v2 = ${coreBounceRandomlyPowerOfN = $edgeBounceRandomlyPowerOfN}

**.edge[*].random_power_bounce_factor = ${edgeBounceRandomlyPowerFactor = 2}
**.agg[*].random_power_bounce_factor = ${aggBounceRandomlyPowerFactor = $edgeBounceRandomlyPowerFactor}
**.core[*].random_power_bounce_factor = ${coreBounceRandomlyPowerFactor = $edgeBounceRandomlyPowerFactor}

**.edge[*].denominator_for_retrasnmissions = ${edgeDenomRet = 2}
**.agg[*].denominator_for_retrasnmissions = ${aggDenomRet = $edgeDenomRet}
**.core[*].denominator_for_retrasnmissions = ${coreDenomRet = $edgeDenomRet}

**.arp.typename = "GlobalArp"
**.edge[*].learn_mac_addresses = false
**.agg[*].learn_mac_addresses = false
**.core[*].learn_mac_addresses = false
**.edge[*].macTable.addressTableFile ="./MAC_Table_Data/fat_tree_edge[" + string(parentIndex()) + "].txt"
**.agg[*].macTable.addressTableFile ="./MAC_Table_Data/fat_tree_agg[" + string(parentIndex()) + "].txt"
**.core[*].macTable.addressTableFile ="./MAC_Table_Data/fat_tree_core[" + string(parentIndex()) + "].txt"

cmdenv-output-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.out
output-scalar-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.sca
output-vector-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.vec
eventlog-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.elog
snapshot-file = results/${K}_k_${numBurstyApps}_burstyapps_${numMiceBackgroundFlowAppsInEachServer}_mice_${numReqPerBurst}_reqPerBurst_${bgInterArrivalMultiplier}_bgintermult_${bgFlowSizeMultiplier}_bgfsizemult_${burstyInterArrivalMultiplier}_burstyintermult_${burstyFlowSizeMultiplier}_burstyfsizemult_${ttl}_ttl_${repetition}_rep_${aggRandomPowerFactor}_rndfwfactor_${aggBounceRandomlyPowerFactor}_rndbouncefactor_${incastFlowSize}_incastfsize_${markingTimer}_mrktimer_${orderingTimer}_ordtimer.sna

##############################################################


**.server[*].numApps = ${server0NumApps = 1 + $numMiceBackgroundFlowAppsInEachServer + $numBurstyApps}
# (index() < 1 + $numMiceBackgroundFlowAppsInEachServer) ? Mice flow : Bursty
**.server[*].app[1..].is_bursty = ${server0IsBursty = index() < 1 + $numMiceBackgroundFlowAppsInEachServer ? false : true}
**.server[*].app[0].typename = "DCTcpGenericServerApp"
**.server[*].app[0].localPort = 80
**.server[*].app[1..].typename = "MultiSocketBasicClient"
**.server[*].app[1..].is_mice_background = ${serverIsMiceBackground = index() < 1 + $numMiceBackgroundFlowAppsInEachServer ? true : false}


########################################################################
[General]

record-eventlog = false
check-signals = false
cmdenv-redirect-output = true

**.tcp.typename = "Tcp"
**.tcp.useCustomIW = true
**.tcp.customIWMult = 10

**.app[*].dataTransferMode = "object"
**.tcp.delayedAcksEnabled = false
**.tcp.increasedIWEnabled = false
**.tcp.limitedTransmitEnabled = false
**.tcp.mss = 1452
**.tcp.nagleEnabled = true
**.tcp.recordStats = true
**.tcp.tcpAlgorithmClass = default
**.tcp.timestampSupport = true
**.tcp.windowScalingSupport = false

# maximum axvertisedwindow
**.tcp.advertisedWindow = 65535

cmdenv-redirect-output = true

**.server[*].app[*].localAddress = ""
**.server[*].app[*].replyDelay = normal(20us, 3us)

**.server[*].tcp.tcpConnectionFINRcv.statistic-recording = true
**.server[*].tcp.tcpConnectionSYNSent.statistic-recording = true
**.server[*].tcp.tcpConnectionSYNSentIsBursty.statistic-recording = true
**.server[*].app[*].requestSentRequesterID.statistic-recording = true
**.server[*].app[*].flowStartedRequesterID.statistic-recording = true
**.server[*].app[*].flowEndedRequesterID.statistic-recording = true
**.server[*].app[*].flowEndQueryID.statistic-recording = true
**.server[*].app[*].replyLengthAsked.statistic-recording = true

**.server[*].tcp.*.rtt.statistic-recording = true
**.server[*].app[*].chunksRcvdLength.statistic-recording = true
**.server[*].app[*].chunksRcvdTotalLength.statistic-recording = true
**.server[*].eth[*].mac.packetHopCount.statistic-recording = true
**.ipv4.ip.v2QTime.statistic-recording = true
**.statistic-recording = false


